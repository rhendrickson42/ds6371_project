---
title: "DDSAnalytics  - Employee Trends"
author:
- Randall Hendrickson
- Rajat Chandna
- Lokesh Maganti
- Mike Kelleher
date: "April 15, 2018"
output: 
  html_document:
    toc: true
    toc_depth: 2
    fig_caption: yes
  pdf_document:
    toc: true
    toc_depth: 2
    fig_caption: yes
---

```{r setup, include=FALSE, echo=FALSE}
library(knitr)
knitr::opts_chunk$set(fig.path = 'images/', echo = FALSE)
```
![Kaggle House Prices](images/Kaggle.png)
\pagebreak

## Introduction

This is the final project for the semester in MSDS 6371 Statistical Foundation for Data Science, and is a group project.  It is based on the [Kaggle House Prices competition](https://www.kaggle.com/c/house-prices-advanced-regression-techniques).  Fundamentally we are seeking to answer what will the sale price of a house be based on some combination of predictive attribute measures of it.  The 2 specific questions below prescribe distinct approaches to answering this question.

## Data Description

As mentioned above, the data comes from the [Kaggle House Prices competition](https://www.kaggle.com/c/house-prices-advanced-regression-techniques).  The specific data sets we use for this project are the training data set (train.csv) to build the models, and test data set (test.csv) to cross-validate our models.

### train.csv

This dataset is roughly 450k with 1460 observations of 81 variables.  To read and understand more about this specific dataset please refer to the Kaggle website at [https://www.kaggle.com/c/house-prices-advanced-regression-techniques/data](https://www.kaggle.com/c/house-prices-advanced-regression-techniques/data).

### test.csv

This dataset, is roughly 441k with 1459 observation of 80 variables.  This has one less observation: SalesPrices.  This is due to the fact it is meant to be used for cross-validation, and does not require this variable because we are meant to predict that with our models.

### Primary Variables

The following variables are fundamental to the answer for Question 1, do not contain missing values, and require no cleaning:
* SalePrice - the property's sale price in dollars
* GrLivArea - Above grade (ground) living area square feet
* Neighborhood - Physical locations within Ames city limits

## Question 1

### The Problem

Ames Century 21 real estate would like us to perform the following analysis of homes:

For the neighborhoods of: BrkSide, Edwards and NAmes, please find a predictive model for home SalePrice based on GrLivArea.  Provide the model assumptions assessment with evidence, as well as data review and outlier analysis.  Please provide estimate or estimates with confidence intervals, and a written conclusion of the relationship of GrLivArea and SalePrice within these neighborhoods.

### Build and Fit the Model

#### Untransformed Data

Model: SalePrice = beta0 + beta1 * GrLivArea + beta2*d1 + beta3*d2 + beta4*d3 + beta5*int1 + beta6*int2 + beta7*int3

When looking at plots of the raw data, there is a clear linear relationship between GrLivArea and SalePrice on Image 001.  However, on Image 002 we can see several issues with the data:
* unequal spread on Residual vs Predicted and Studentized Residual vs Predicted, looks like the variance is increasing
* the qqplot is curved and the histogram is rather large in the middle suggesting non-normal data
* Cooks-D and Leverage show points that may have leverage and should be investigated

When looking at Image 003, most of the parameter estimates look good except for d3, int2 and int3.  The VIF for all estimates are high, the smallest being 22.  This is another sign that outliers should be investigated.

We need to perform outlier analysis and peform transformations to address equal deviation and normality.

#### Other Transformations

Log-Linear, and Linear_log were both experimented with.  None of the violations were addressed using any of these methods.  In some cases, it made the linear relationship worse with SalePrice.  For brevity, no graphs are provided for these transformations.

#### Log-Log Transformed Data

Model: SalePrice = beta0 + beta1 * LogGrLivArea + beta3*d2 + beta4*d3 + beta6*centLint2 + beta7*centLint3

For brevity, some of the interative process for analyzing the data is omitted, but summarised here.  It was found that there was no statistical difference between the BrkSide and Edwards neighborhoods, so these were combined into a single entity.  Also, to address the high VIF values, the interaction variables were centered.

### Assumptions
When looking at the Log-Log transformed data in Image 004, the linear relationship looks much better.  Also,, when looking at the fit diagnostics in Image 005, we can se that the assumptions are addressed:
1.There is a clear linear trend with explanatory variables with the LogSalePrice
1. The histogram looks better and the QQ plot as well, combined with the large number of observations, we can say the data ius normal
1. All residual plots look like a good random cloud with equal variace across the graph
1. For independence, we do not know how the data were collected, and will assume that they are independent

The fit diagnostics in Image 005 and Regression statistics in Image 006 display that all issues are addressed with the data.

#### Outlier Analysis

After analyzing the scatterplots, we noticed the two observations that were from homes over 4500 square feet.  Since these two observations have high leverage, we decided to try to find other effects these observations might have. Looking at the group ranking of these observations we decided to remove these observations due to the effect these had on our model assumptions.  We were more interested in the observations that were centered around the middle of the ranking.

Additionally, the GrLivArea of these observations for the Edwards Neighborhood is thought to be not representative of this area.  These values were extremely above the third quartile.  Give this we justified removing these observations.

### Comparison of Competing Models

#### Models
1. SalePrice    = 19972  +  87.163*GrLivArea   +  68382*d1  + 54705*d2  +  -12416*d3  +  -57.412*int1  +  -32.847*int2  +  31.351*int3
1. LogSalePrice = 5.844  +  0.845*LogGrLivArea +  0.094*d2  + 0.219*d3  +  -0.268*centLint2  +  0.169*centLint3

### Parameters
* Estimates - refer to model #2 above for the parameter estimates
* Interpretation
* Confidence Intervals

### Conclusion

## Question 2

### The Problem

### Model Selection

#### Forward

##### Assumptions
* Linear Trend (Plots: Response vs Explanatory, Explanatory vs Explanatory)
* Normality (Residual: Scatter, QQ Plot, Histogram)
* Equal Standard Deviation (Residual Scatter Plots)

#### Backward

##### Assumptions
* Linear Trend (Plots: Response vs Explanatory, Explanatory vs Explanatory)
* Normality (Residual: Scatter, QQ Plot, Histogram)
* Equal Standard Deviation (Residual Scatter Plots)

#### Stepwise

##### Assumptions
* Linear Trend (Plots: Response vs Explanatory, Explanatory vs Explanatory)
* Normality (Residual: Scatter, QQ Plot, Histogram)
* Equal Standard Deviation (Residual Scatter Plots)

#### Custom

##### Assumptions
* Linear Trend (Plots: Response vs Explanatory, Explanatory vs Explanatory)
* Normality (Residual: Scatter, QQ Plot, Histogram)
* Equal Standard Deviation (Residual Scatter Plots)

### Comparison of Models
| Predictive Models | Adusted R^2 | CV Press | Kaggle Score |
|-------------------|:-----------:|:--------:|:------------:|
| Forward           | 0.1111      | 1111     | .111         |
| Backward          | 0.2222      | 2222     | .222         |
| Stepwise          | 0.3333      | 3333     | .333         |
| Custom            | 0.4444      | 4444     | .444         |

### Conclusion

## Appendix

### Question 1

#### Plots of Untransformed Data
![Neighborhoods](images/image_001.PNG)*Image 001*
![Untransformed Fit Diagnostics](images/Image_002.PNG)*Image 002*
![Untransformed Proc Reg](images/image_003.PNG)*Image 003*
![Other Neighborhoods](images/Untransformed-Others.png)*Image 004*
![MLR Parameter Estimates](images/Untransformed-MLR-Estimates.png)*Image 005*
![MLR Residual Plots](images/Untransformed-MLR-Residuals.png)*Image 006*

----

#### Plots of Log-Log Data
![BrkSide](images/Log-Log-BrkSide.png)*Image 007*
![Edwards](images/Log-Log-Edwards.png)*Image 008*
![NAmes](images/Log-Log-NAmes.png)*Image 009*
![Other Neighborhoods](images/Log-Log-Others.png)*Image 010*
![MLR Parameter Estimates](images/Log-Log-MLR-Estimates.png)*Image 011*
![MLR Residual Plots](images/Log-Log-MLR-Residuals.png)*Image 012*

----

### Question 2
